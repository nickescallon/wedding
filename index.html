<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/main.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
	
	<nav>
		<h1 id="brand" class="active"></h1>

		<ul>
			<li data-target="wedding-day">
				<div><i class="fa fa-3x fa-glass"></i></div>
				<div>wedding day</div>
			</li>
			<li data-target="travel">
				<div><i class="fa fa-3x fa-plane"></i></div>
				<div>travel</div>
			</li>
			<li data-target="activities">
				<div><i class="fa fa-3x fa-paw"></i></div>
				<div>activities</div>
			</li>
			<li data-target="photos">
				<div>
					<div><i class="fa fa-3x fa-camera"></i></div>
					<div>photos</div>
				</div>
			</li>
			<li data-target="registry">
				<div><i class="fa fa-3x fa-gift"></i></div>
				<div>registry</div>
			</li>
		</ul>
	</nav>
	<div id="main">

		<section id="home" class="visible">
			
		</section>
		
		<section id="wedding-day">
			<h1>COMING SOON: Wedding Day</h1>
			<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>
				<h1>test</h1>

		</section>

		<section id="travel">
			<h1>COMING SOON: Travel</h1>
		</section>

		<section id="activities">
			<h1>COMING SOON: Activities</h1>
		</section>

		<section id="photos">
			<h1>COMING SOON: Photos</h1>
		</section>

		<section id="registry">
			<h1>COMING SOON: Registry</h1>
		</section>

	</div>

	<!-- <script src="//code.jquery.com/jquery-2.2.1.min.js"></script> -->
	<script>
		var elems = {
			nav: {
				root: document.querySelector('nav ul'),
				items: document.querySelectorAll('nav li')
			},
			brand: document.getElementById('brand'),
			section: {
				home: document.getElementById('home'),
				weddingDay: document.getElementById('wedding-day'),
				travel: document.getElementById('travel'),
				activities: document.getElementById('activities'),
				photos: document.getElementById('photos'),
				registry: document.getElementById('registry')
			}
		};

		var state = {
			currentActiveNode: null
		};

		function removeClass(node, cssClass) {
			if (node.classList.contains(cssClass)) {
				node.classList.remove(cssClass);
			}
		}

		function addClass(node, cssClass) {
			if (!node.classList.contains(cssClass)) {
				node.classList.add(cssClass);
			}
		}

		function activate(node) {
			if (node !== state.currentActiveNode) {
				var navElems = [].slice.call(elems.nav.items);
				navElems.push(elems.brand);

				navElems.forEach(function(navNode) {
					removeClass(navNode, 'active');
				});
				node.classList.add('active');
				state.currentActiveNode = node;

				transitionTo(node.dataset.target);
			}
		}

		function findClosest(node, selector) {
			if (!node) {
				return null;
			} else if (node.tagName.toLowerCase() === selector.toLowerCase()) {
				return node;
			} else {
				return findClosest(node.parentNode, selector);
			}
		}

		function transitionTo(id) {
			var targetNode = document.getElementById(id);
			Object.keys(elems.section).forEach(function(elemKey) {
				var sectionNode = elems.section[elemKey];
				return sectionNode === targetNode ? addClass(targetNode, 'visible') : removeClass(sectionNode, 'visible');
			});
		}

		// set up events
		elems.nav.root.addEventListener('click', function(e) {
			var li = findClosest(e.target, 'li');
			activate(li);
		});

		elems.brand.addEventListener('click', function() {
			activate(this);
			transitionTo('home');
		});

		// escallucci animation
		var letters = 'Escallon Castellucci'.split(''),
			lettersToDelete = [4,5,6,7,8,9,10,11,12,13],
			llucci = [14,15,16,17,18,19];

		addLetters();

		function addLetters() {
			var letter = letters.splice(0,1)[0];
			if (letter === undefined) {
				setTimeout(hideLetters, 2000);
				return;
			}

			var span = document.createElement('SPAN');
			span.textContent = letter;
			setTimeout(function() {
				elems.brand.appendChild(span);
				addLetters();
			}, 100);
		}

		function hideLetters() {
			var whole = document.querySelectorAll('#brand > span');
			var random = Math.floor(Math.random() * lettersToDelete.length);
			var indexToDelete = lettersToDelete.splice(random, 1)[0];
			if (indexToDelete === undefined) {
				// here we could start the next set
				setTimeout(function() {

					moveLlucci();
				}, 1000)
				
				return;
			}

			var span = whole[indexToDelete];
			setTimeout(function() {
				// span.style.display = 'none';
				span.style.opacity = 0;
				hideLetters();
			}, 150);
		}

		function moveLlucci() {
			var whole = document.querySelectorAll('#brand > span');
			var random = Math.floor(Math.random() * lettersToDelete.length);
			var startIndex = llucci.splice(random, 1)[0];
			if (startIndex === undefined) {
				// elems.brand.style.color = 'tomato';	
				return;
			}

			var endIndex = startIndex - 10;
			var startSpan = whole[startIndex];
			var endSpan = whole[endIndex]
			endSpan.textContent = startSpan.textContent;
			startSpan.style.opacity = 0;
			endSpan.style.opacity = 1;

			moveLlucci();
		}
		// end escallucci


	</script>

</body>

</html>

